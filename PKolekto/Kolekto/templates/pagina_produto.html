{% extends "layout.html" %} {% block title %} {{ nome_produto }} {% endblock %}
{% block main %}

<script>
  document.getElementById("adicionarListaDesejos").addEventListener("click", function() {
      var produtoId = this.getAttribute("data-produto");

      // Realizar a solicitação AJAX para adicionar o produto à lista de desejos
      var xhr = new XMLHttpRequest();
      xhr.open("POST", "{% url 'add_lista_desejos' %}", true);
      xhr.setRequestHeader("X-CSRFToken", "{{ csrf_token }}");
      xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
      xhr.onreadystatechange = function() {
          if (xhr.readyState === 4 && xhr.status === 200) {
              // A ação foi realizada com sucesso, você pode atualizar a interface do usuário, se necessário
              alert("Produto adicionado à lista de desejos!");
          }
      };
      xhr.send("produto_id=" + produtoId);
  });
</script>

<div
  class="d-flex justify-content-center flex-wrap"
  style="width: 90%; margin: 0 auto"
>
  <div class="image-container" style="width: 100%">
    <img width="400" height="400" src="{{ foto1 }}" alt="{{ nome_produto }}" />
  </div>
  <div
    class="d-flex justify-content-around flex-column px-5 mx-5 border text-container"
    style="width: 100%"
  >
    <div>
      <p style="font-size: 410%">{{ nome_produto }}</p>
      <a href="/{{ nome_loja }}" class="link-primary" style="font-size: 140%"
        >{{ nome_loja }}</a
      >
      <!--kolekto.azurewebsites.net/{{ nome_loja }}-->
      <hr />
    </div>
    <p style="font-size: 200%">R$ {{ preco }}</p>
    <p style="font-size: 100%">
      <strong>Quantidade Disponível:</strong> {{ qntd }}
    </p>
    <p style="font-size: 100%"><strong>Categoria:</strong> {{ categoria }}</p>
    <p style="font-size: 100%"><strong>Descrição:</strong> {{ descricao }}</p>
    <div>
      <button
        class="btn btn-lg btn-outline-success mx-1"
        style="font-size: 140%"
      >
        <i class="fa-solid fa-cart-shopping"></i>
      </button>
      <button
        id="adicionarListaDesejos" data-produto="{{ produto.id }}"
        class="btn btn-lg btn-outline-danger mx-1"
        style="font-size: 140%"
      >
        <i class="fa-solid fa-heart"></i>
      </button>
      <button
        class="btn btn-lg btn-outline-success mx-1"
        style="font-size: 140%"
      >
        Comprar
      </button>
    </div>
  </div>
</div>

{% endblock %}
